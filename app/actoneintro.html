<!doctype html>
<html class="no-js" lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Foundation</title>
    <link rel="stylesheet" href="css/app.css" />
    <script src="bower_components/react/react-with-addons.js"></script>
    <script src="bower_components/react/JSXTransformer.js"></script>
    <script src="bower_components/modernizr/modernizr.js"></script>
  </head>
  <body>

    <!-- <div class="fullscreen-bg">

      <video autoplay id="bgvid">
        <source src="video/act1_background.webm" type="video/webm">
        <source src="video/act1_background.mp4" type="video/mp4">
      </video>

    </div> -->

    <div id="choose_your_story">

      <div class="header_container">
        <h2>He Said She Said</h2>
        <h1>Whose point of view do you want to experience first?</h1>
      </div>

      <div class="cys_split_container">

        <div class="cys_side cys_he_container">

          <div class="cys_text_overlay">
            <h2>John</h2>
            <p>Lorem ipsum dolor sit amet, consectetur adipiscing elit. Phasellus sodales hendrerit pulvinar.</p>
          </div>

        </div>

        <div class="cys_side cys_she_container">

          <div class="cys_text_overlay">
            <h2>Sue</h2>
            <p>Lorem ipsum dolor sit amet, consectetur adipiscing elit. Phasellus sodales hendrerit pulvinar.</p>
          </div>

        </div>

      </div>

    </div>

    <div class="main_screen_container">
      <div id="john_message_container"></div>
      <div id="sue_message_container"></div>
    </div>

    <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.6.2/jquery.min.js"></script>
    <script src="bower_components/jquery/dist/jquery.min.js"></script>
    <script src="bower_components/foundation/js/foundation.min.js"></script>
    <script src="js/app.js"></script>
    <script src="js/jquery.flexslider-min.js"></script>
    <script type="text/jsx" src="js/react-components/messages.jsx"></script>
    <script type="text/jsx">
      window.johnMessenger = React.render(
        <Messenger id="johnMessenger"></Messenger>,
        document.getElementById('john_message_container')
      );
      johnMessenger.setBackgroundColor('rgba(0,0,255.25)');

      window.sueMessenger = React.render(
        <Messenger id="sueMessenger"></Messenger>,
        document.getElementById('sue_message_container')
      );
      sueMessenger.setBackgroundColor('rgba(255,0,0,.25)');

      var johnFirstAlert = function() {
        var audioNode = this.getDOMNode().querySelector('audio');
        var host = this.props.host;
        audioNode.addEventListener('play', function() {
          console.log("You're playing audio");
          host.setBackgroundImage("linear-gradient(rgba(0,0,187,.50),rgba(0,0,187,.50)), url('/img/NumberEx3.jpeg')");
        });

        audioNode.addEventListener('ended', function() {
          document.querySelector('.cys_she_container').classList.add('animated');
        });
      }

      johnMessenger.post({
        message: 'At the time of meeting he was in an open relationship.',
        contentType: 'text',
        self: false
      }, true);
      johnMessenger.post({
        message: 'https://raw.githubusercontent.com/tholman/elevator.js/master/demo/music/elevator.mp3',
        contentType: 'audio',
        self: false
      }, true, johnFirstAlert);

      sueMessenger.post({
        message: 'At the time of meeting he was in an open relationship. this is the other one',
        contentType: 'text',
        self: false
      }, true);
       sueMessenger.post({
        message: 'https://raw.githubusercontent.com/tholman/elevator.js/master/demo/music/elevator.mp3',
        contentType: 'audio',
        self: false
      }, true, function(){});

    </script>
  </body>
</html>